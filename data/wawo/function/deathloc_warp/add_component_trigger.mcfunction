execute if items entity @s weapon.mainhand recovery_compass store result score @s wawo.compass.latest.link.pos.x run data get entity @s LastDeathLocation.pos[0]
execute if items entity @s weapon.mainhand recovery_compass store result score @s wawo.compass.latest.link.pos.y run data get entity @s LastDeathLocation.pos[1]
execute if items entity @s weapon.mainhand recovery_compass store result score @s wawo.compass.latest.link.pos.z run data get entity @s LastDeathLocation.pos[2]

execute as @s[nbt={LastDeathLocation:{dimension:"minecraft:overworld"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_overworld
execute as @s[nbt={LastDeathLocation:{dimension:"minecraft:the_nether"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_nether
execute as @s[nbt={LastDeathLocation:{dimension:"minecraft:the_end"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_end
execute as @s[nbt={LastDeathLocation:{dimension:"nmr:astral_plane"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_astral_plane
execute as @s[nbt={LastDeathLocation:{dimension:"eden:outer_wilds"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_outer_wilds
execute as @s[nbt=!{LastDeathLocation:{dimension:"minecraft:overworld"}},nbt=!{LastDeathLocation:{dimension:"minecraft:the_nether"}},nbt=!{LastDeathLocation:{dimension:"minecraft:the_end"}},nbt=!{LastDeathLocation:{dimension:"nmr:astral_plane"}},nbt={LastDeathLocation:{dimension:"eden:outer_wilds"}}] if items entity @s weapon.mainhand recovery_compass run item modify entity @s weapon.mainhand wawo:coords_other